<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Project:testing</title>
    <link rel="stylesheet" type="text/css" href="css/indexStyle.css">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!-- Optional theme -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="centered gray">
      <div class="panel-header bordered">
        <div class="col-lg-1 container"></div>
        <div class="col-lg-10 container">
          <h1>Nick Goh Personal Project site</h1>
        </div>
        <div class="col-lg-1 container"></div>
      </div>
      <div class="panel-body bordered">
        <div class="col-lg-1 container"></div>
        <div class="col-lg-10 container">
          <h1>Timer with incremental button</h1>
          <h3 id="demo"></h3>
        </div>
        <div class="col-lg-1 container"></div>
      </div>
      <div class="panel-body bordered">
        <div class="col-lg-1 container"></div>
        <div class="col-md-5">
          <button class="btn btn-danger" style="margin-top:61px;" onClick="addTime()">Add 10 minutes</button>
        </div>
        <div class="col-md-5">
          <h3 id="time"></h3>
          <h3 id="timeLeft"></h3>
        </div>
        <div class="col-lg-1 container"></div>
      </div>
      <div class="panel-footer gray bordered">
        <div class="col-lg-1 container"></div>
        <div class="col-lg-10 container inRow">
          <div class="col-sm-3" style="margin-top:33px;">
            <a href="./index.html">
              <span class="btn btn-info">Return to Home</span>
            </a>
          </div>
          <div class="col-sm-3">
            <a href="https://www.facebook.com/nick.goh.96/">
              <img src="img/facebook.png">
            </a>
          </div>
          <div class="col-sm-3">
            <a href="https://www.instagram.com/kengchuan95/">
              <img src="img/instagram.png">
            </a>
          </div>
          <div class="col-sm-3">
            <a href="https://www.linkedin.com/in/nicholas-goh-256a69b6/">
              <img src="img/linkedin.png">
            </a>
          </div>
        </div>
        <div class="col-lg-1 container"></div>
      </div>
    </div>
    <script>
      window.onload = initialSetup();

      function initialSetup() {
        // Set the date we're counting down to
        var countDownDate = new Date();
        var countDownTime = countDownDate.getTime();
        //set the dateTime we're counting down to. this serves as an indicator of the endpoint, but also as the ID where we can generate the current date value we're counting to
        document.getElementById("time").innerText = countDownDate;
        // Update the count down every .1 second
        var x = setInterval(function() {
          var countDownTime = new Date(document.getElementById("time").innerText).getTime();
          var now = new Date().getTime();
          // Find the distance between now and the count down date
          var distance = countDownTime - now;
          // Time calculations for days, hours, minutes and seconds. time is stored in ms from the the minimum date.
          var days = Math.floor(distance / (1000 * 60 * 60 * 24)); //24 hours, 60 minutes, 60 seconds, 1000ms
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)); //60 minutes, 60 seconds, 1000ms
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)); //60 seconds, 1000ms
          var seconds = Math.floor((distance % (1000 * 60)) / 1000); //1000ms
          //reset the timer statement and build with only the relevant portions each time. no one is silly enough to press the button until we get to years
          var timeStatement = "";
          if (days > 0) {
            timeStatement += days + " Days, ";
          }
          if (hours > 0) {
            timeStatement += hours + " Hours, ";
          }
            if (minutes > 0) {
              timeStatement += minutes + " Minutes, ";
            }
            if (seconds > 0) {
              timeStatement += seconds + " Seconds";
            }
          document.getElementById("timeLeft").innerHTML = timeStatement;
          // If the count down is finished, write some text
          if (distance < 0) {;
            document.getElementById("timeLeft").innerHTML = "EXPIRED";
          }
        }, 100);
      }

      function addTime() { //function called by the button. this increments and sets the new time. the countdown is handled by the interval timer still
        var currentTimer = new Date(document.getElementById("time").innerText).getTime();
        currentTimer = new Date(currentTimer + 600000); //60 seconds/minute * 10 minutes * 1000ms/s
        document.getElementById("time").innerText = currentTimer;
      }
    </script>
  </body>
</html>